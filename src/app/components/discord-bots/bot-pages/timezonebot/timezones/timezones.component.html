<div class="main-container">
  <div class="top-container">
    <h1>Time Zone Selector for TimeZoneBot</h1>
    <div class="table-description">
      Find your time zone below and click "Set" to set it as your time zone.
      Alternatively, click the copy <mat-icon>file_copy</mat-icon> button to
      copy the time zone ID and use it with TimeZoneBot's
      <code>/set-time-zone</code> command.
    </div>
  </div>
  <app-loading-bar [isLoading]="isLoading"></app-loading-bar>
  <div class="content-container">
    <ng-container *ngIf="!isLoading">
      <div class="filter-options">
        <div>Select a filter below to narrow down the list.</div>
        <mat-form-field class="filter-field">
          <mat-label>Select a Filter</mat-label>
          <mat-select
            [(ngModel)]="selectedFilter"
            (selectionChange)="filterTimeZones()"
          >
            <mat-option
              *ngFor="let filter of timeZoneFilterOptions"
              [value]="filter"
            >
              {{ filter }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field class="filter-field">
          <mat-label>Search Text</mat-label>
          <input
            [(ngModel)]="filterText"
            (input)="filterTimeZones()"
            matInput
            placeholder="Ex. Toronto"
          />
        </mat-form-field>
        <div class="clear-filter-button" *ngIf="selectedFilter || filterText">
          <button mat-raised-button color="warn" (click)="clearFilter()">
            Clear Filter
          </button>
        </div>
      </div>
      <h3 class="current-time-zone">
        Your Current Time Zone:
        <span *ngIf="isTimeZoneLoading">Loading...</span>
        <span class="current-time-zone-highlight" *ngIf="!isTimeZoneLoading">{{
          formatCurrentTimeZone()
        }}</span>
        <br />
        <span
          class="current-time-zone-highlight"
          *ngIf="!isTimeZoneLoading && currentTime"
          >{{ currentTime }}</span
        >
      </h3>
      <table
        mat-table
        [dataSource]="dataSource"
        class="mat-elevation-z8 time-zone-table"
      >
        <ng-container matColumnDef="set-button">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <button
              mat-raised-button
              color="Primary"
              (click)="setTimeZone(element.id)"
            >
              Set
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="copy-button">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let element">
            <button
              class="copy-button"
              mat-icon-button
              [cdkCopyToClipboard]="element.id"
            >
              <mat-icon>file_copy</mat-icon>
            </button>
          </td>
        </ng-container>

        <ng-container matColumnDef="timezone-id">
          <th mat-header-cell *matHeaderCellDef>ID (IANA)</th>
          <td mat-cell *matCellDef="let element">
            {{ element.id }} (UTC {{ formatUtcOffset(element.utcOffsetHours) }})
          </td>
        </ng-container>

        <!-- <ng-container matColumnDef="utc-offset">
        <th mat-header-cell *matHeaderCellDef>UTC +/-</th>
        <td mat-cell *matCellDef="let element">{{ element.utcOffsetHours }}</td>
      </ng-container>

      <ng-container matColumnDef="continent">
        <th mat-header-cell *matHeaderCellDef>Continent</th>
        <td mat-cell *matCellDef="let element">{{ element.continent }}</td>
      </ng-container>

      <ng-container matColumnDef="city">
        <th mat-header-cell *matHeaderCellDef>Zone</th>
        <td mat-cell *matCellDef="let element">{{ element.city }}</td>
      </ng-container> -->

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </ng-container>
  </div>
</div>
